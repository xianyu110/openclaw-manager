# 🎯 OpenClaw Manager 使用指南

## 快速启动

### 1. 停止旧版本（如果正在运行）

如果你之前运行了 `openclaw-manager-web`，先停止它：

```bash
# 按 Ctrl+C 停止
```

### 2. 启动新版本

```bash
cd openclaw-manager
npm install  # 首次运行需要安装依赖
npm start
```

### 3. 打开浏览器

访问 http://localhost:3000

---

## 功能位置说明

### 📍 在哪里配置模型和人格？

#### 方法 1：创建新 Gateway 时配置

1. 点击顶部的 **"➕ 新建 Gateway"** 按钮
2. 填写基本信息：
   - Profile ID（唯一标识）
   - 机器人名称
   - 端口号
   - Agent ID
3. **配置模型**：
   - 选择预设模型（下拉菜单）
   - 或勾选"使用自定义模型"，输入任意模型 ID
4. **配置人格**：
   - 点击"展开编辑器"
   - 在文本框中编写 Markdown 格式的人格设定
   - 定义 Agent 的角色、性格、专业领域等

#### 方法 2：编辑现有 Gateway

1. 在服务卡片中点击 **"✏️ 编辑"** 按钮
2. 修改模型配置
3. 展开人格编辑器，修改 SOUL.md 内容
4. 点击"保存"

---

## 界面功能说明

### 顶部操作栏

```
🔍 重新扫描  |  刷新状态
```

- **重新扫描**：重新发现所有 Gateway 实例
- **刷新状态**：更新服务运行状态

### 主要按钮

```
➕ 新建 Gateway  |  ⚙️ 配置保活  |  ▶️ 启动所有  |  ⏹️ 停止所有  |  🔄 重启所有
```

- **新建 Gateway**：创建新的 Gateway 实例（包含模型和人格配置）
- **配置保活**：配置 launchd 自动启动和重启
- **启动/停止/重启所有**：批量控制所有服务

### 服务卡片操作

每个服务卡片底部有三个按钮：

```
✏️ 编辑  |  🗑️ 删除  |  📝 日志
```

- **✏️ 编辑**：打开编辑对话框，可以修改模型和人格
- **🗑️ 删除**：删除 Gateway（会提示确认）
- **📝 日志**：查看服务日志

---

## 配置模型详细说明

### 预设模型

系统提供以下预设模型：

- Claude Opus 4.6
- Claude Opus 4.6 Thinking
- Claude Sonnet 4.5
- Claude Sonnet 4.5 Thinking
- Gemini 2.5 Flash
- Gemini 2.5 Pro
- GPT-4o
- GPT-4o-mini

### 自定义模型

如果你想使用其他模型：

1. 勾选"使用自定义模型"
2. 输入模型 ID，例如：
   - `gpt-4-turbo`
   - `claude-3-opus-20240229`
   - `gemini-1.5-pro`
   - 任何你的 OpenClaw 支持的模型

**注意**：自定义模型需要在 OpenClaw 配置中正确设置对应的 API Key。

---

## 配置人格（SOUL.md）详细说明

### 什么是 SOUL.md？

SOUL.md 是定义 Agent 人格的 Markdown 文件，包含：

- 角色定位
- 性格特点
- 专业领域
- 回答风格
- 工作方式

### 如何编辑？

1. 在创建或编辑 Gateway 时
2. 找到"Agent 人格设定 (SOUL.md)"部分
3. 点击"展开编辑器"
4. 在文本框中编写 Markdown 内容

### 示例模板

```markdown
# 专业技术顾问

## 角色定位
你是一个资深的软件架构师和技术顾问，拥有 10 年以上的开发经验。

## 专业领域
- 系统架构设计
- 微服务架构
- 云原生技术
- DevOps 实践

## 性格特点
- 严谨、专业
- 注重细节和最佳实践
- 善于分析问题根源
- 乐于分享经验

## 工作方式
1. 先充分理解用户的需求和背景
2. 分析问题的本质和潜在风险
3. 提供多个可行方案，并说明优缺点
4. 给出具体的实施建议和代码示例
5. 关注长期可维护性

## 回答风格
- 使用清晰的结构化表达
- 提供具体的代码示例
- 引用业界最佳实践
- 必要时画图说明架构
```

### 人格设定技巧

1. **明确角色**：清楚定义 Agent 是什么角色
2. **具体化**：避免泛泛而谈，给出具体特点
3. **场景化**：描述在不同场景下的行为方式
4. **风格化**：定义独特的回答风格和语气

---

## 完整工作流程

### 创建一个新的专业助手

1. **点击"新建 Gateway"**

2. **填写基本信息**：
   ```
   Profile ID: tech-consultant
   机器人名称: 技术顾问助手
   端口号: 18793
   Agent ID: tech-consultant-agent
   ```

3. **选择模型**：
   - 选择 "Claude Sonnet 4.5 Thinking"
   - 或使用自定义模型

4. **配置飞书**：
   ```
   App ID: cli_xxxxxxxxxxxxxxxx
   App Secret: ••••••••••••••••
   ```

5. **编写人格**：
   - 点击"展开编辑器"
   - 复制上面的示例模板
   - 根据需求修改

6. **点击"创建"**

7. **启动服务**：
   - 点击"启动所有"
   - 或在服务卡片中单独启动

8. **测试**：
   - 在飞书中 @ 你的机器人
   - 观察它是否按照人格设定回答

---

## 常见问题

### Q: 修改人格后需要重启服务吗？

A: 是的，修改 SOUL.md 后需要重启对应的 Gateway 服务才能生效。

### Q: 自定义模型不工作怎么办？

A: 检查以下几点：
1. 模型 ID 是否正确
2. OpenClaw 配置中是否有对应的 API Key
3. 查看服务日志确认错误信息

### Q: 可以为不同的群组配置不同的人格吗？

A: 可以！创建多个 Gateway，每个使用不同的飞书机器人和人格设定。

### Q: 人格设定有字数限制吗？

A: 没有硬性限制，但建议控制在 2000 字以内，过长可能影响 Agent 的响应速度。

---

## 高级技巧

### 1. 创建专业领域助手

为不同领域创建专门的助手：

- **代码审查助手**：严格、注重规范
- **创意写作助手**：活泼、富有想象力
- **客服助手**：耐心、友好、专业

### 2. 使用不同模型的优势

- **Claude Opus**：复杂推理、长文本处理
- **Claude Sonnet**：平衡性能和成本
- **Gemini Flash**：快速响应、高并发
- **GPT-4o**：多模态能力

### 3. 人格设定最佳实践

```markdown
# 好的人格设定示例

## 角色
你是一个专业的 Python 开发导师

## 教学风格
- 从基础概念开始讲解
- 使用生活化的比喻
- 提供可运行的代码示例
- 鼓励学生动手实践

## 回答结构
1. 简短总结答案
2. 详细解释原理
3. 提供代码示例
4. 给出练习建议
```

---

## 截图说明

### 主界面
- 顶部：操作按钮
- 中间：服务卡片网格
- 底部：系统信息

### 创建/编辑对话框
- 基本信息表单
- 模型选择区域
- 人格编辑器（可展开/收起）
- 保存/取消按钮

---

## 需要帮助？

如果遇到问题：

1. 查看服务日志（点击"📝 日志"按钮）
2. 检查 OpenClaw 配置文件
3. 查看 GitHub Issues
4. 提交新的 Issue

---

**祝你使用愉快！** 🎉
